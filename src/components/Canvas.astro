<canvas id="canvas"></canvas>

<script>
  var can = document.getElementById("canvas");
  var ctx = can.getContext("2d");
  var img;

  var circle = {
    x: can.width / 2, // Initial x-coordinate
    y: can.height / 2, // Initial y-coordinate
    radius: 50,
  };

  function init() {
    // Set canvas dimensions based on the window size
    can.width = 500;
    can.height = 500;

    // Load the image after setting canvas dimensions
    img = new Image();
    img.onload = function () {
      redraw();
    };
    img.src =
      "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/The_Night_Watch_-_HD.jpg/1920px-The_Night_Watch_-_HD.jpg";
  }

  init();

  window.addEventListener("resize", function () {
    init();
  });

  can.addEventListener("mousemove", function (e) {
    // Update circle position based on the current mouse position
    var mouse = getMouse(e, can);
    circle.x = mouse.x;
    circle.y = mouse.y;
    redraw();
  });

  function redraw() {
    can.width = can.width;
    ctx.drawImage(img, 0, 0, can.width, can.height);
    ctx.beginPath();
    ctx.rect(0, 0, can.width, can.height);

    ctx.arc(circle.x, circle.y, circle.radius, 0, Math.PI * 2, true);

    ctx.clip();
    ctx.fillStyle = "#FFF9E8";
    ctx.fillRect(0, 0, can.width, can.height);
  }

  // Function to get mouse position relative to the canvas
  function getMouse(e, canvas) {
    var element = canvas,
      offsetX = 0,
      offsetY = 0,
      mx,
      my;

    if (element.offsetParent !== undefined) {
      do {
        offsetX += element.offsetLeft;
        offsetY += element.offsetTop;
      } while ((element = element.offsetParent));
    }

    mx = e.pageX - offsetX;
    my = e.pageY - offsetY;

    return {
      x: mx,
      y: my,
    };
  }
</script>

<style>
  canvas {
    display: block;
    cursor: none;
    width: 100%;
    height: 100%;
  }
</style>
